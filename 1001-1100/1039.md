### 1039. 多边形三角剖分的最低得分

难度：Middle

相关话题：`动态规划`

给定 `N` ，想象一个凸 `N` 边多边形，其顶点按顺时针顺序依次标记为 `A[0], A[i], ..., A[N-1]` 。



假设您将多边形剖分为  `N-2`  个三角形。对于每个三角形，该三角形的值是顶点标记的**乘积** ，三角剖分的分数是进行三角剖分后所有  `N-2`  个三角形的值之和。



返回多边形进行三角剖分后可以得到的最低分。









**示例 1：** 



```
输入：[1,2,3]
输出：6
解释：多边形已经三角化，唯一三角形的分数为 6。
```


**示例 2：** 



![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/05/03/minimum-score-triangulation-of-polygon-1.png)




```
输入：[3,7,4,5]
输出：144
解释：有两种三角剖分，可能得分分别为：3*7*5 + 4*5*7 = 245，或 3*4*5 + 3*4*7 = 144。最低分数为 144。
```


**示例 3：** 



```
输入：[1,3,1,4,1,5]
输出：13
解释：最低分数三角剖分的得分情况为 1*1*3 + 1*1*4 + 1*1*5 + 1*1*1 = 13。
```






**提示：** 




1.  `3 <= A.length <= 50` 

2.  `1 <= A[i] <= 100` 






-----

思路：

关键是对多边形的正确划分，自己做的时候没有划分好，导致一直`TLE`；

例如：多边形`[1,2,3,4,5,6]`，首先可以划分为`[1,2,3]`和`[3,4,5,6,1]`，这样另一个多边形`[3,4,5,6,1]`是连续的；

接着，`[3,4,5,6,1]`划分为`[3,4,5]`和`[5,6,1,3]`，这时`[5,6,1,3]`就是一个索引**不连续**的多边形，因为中间还有一个索引`2`被跳过了，
这就导致状态很难被保存；

正确对`[1,2,3,4,5,6]`的划分应该是

* `[1~2]`和`[2~6]`和`[1,2,6]`
* `[1~3]`和`[3~6]`和`[1,3,6]`
* `[1~4]`和`[4~6]`和`[1,4,6]`

如上划分，通过将头尾作为一个三角形，就可以保证多边形的索引始终是连续的，状态保存可以只保存连续索引区间的头和尾，至于`3`个数的区间，直接计算乘积，并不需要连续限制。

```
/**
 * @param {number[]} A
 * @return {number}
 */
var minScoreTriangulation = function(A) {
  let dp=Array(51).fill().map(()=>Array(51).fill(null))
  return dfs(0,A.length-1)
  function dfs(l,r){
    if(r-l===1)return 0
    if(dp[l][r]!=null)return dp[l][r]
    let area=Infinity
    for(let k=l+1;k<r;k++){
      area=Math.min(area,dfs(l,k)+dfs(k,r)+A[l]*A[k]*A[r])
    }
    dp[l][r]=area
    return area
  }
};
```

