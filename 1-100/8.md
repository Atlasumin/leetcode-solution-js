### 8. 字符串转换整数 (atoi)

难度：Middle

相关话题：`数学`、`字符串`

请你来实现一个 `atoi` 函数，使其能将字符串转换成整数。



首先，该函数会根据需要丢弃无用的开头空格字符，直到寻找到第一个非空格的字符为止。



当我们寻找到的第一个非空字符为正或者负号时，则将该符号与之后面尽可能多的连续数字组合起来，作为该整数的正负号；假如第一个非空字符是数字，则直接将其与之后连续的数字字符组合起来，形成整数。



该字符串除了有效的整数部分之后也可能会存在多余的字符，这些字符可以被忽略，它们对于函数不应该造成影响。



注意：假如该字符串中的第一个非空格字符不是一个有效整数字符、字符串为空或字符串仅包含空白字符时，则你的函数不需要进行转换。



在任何情况下，若函数不能进行有效的转换时，请返回 0。



 **说明：** 



假设我们的环境只能存储 32 位大小的有符号整数，那么其数值范围为[&minus;231, 231&minus; 1]。如果数值超过这个范围，qing返回 INT_MAX (231&minus; 1) 或INT_MIN (&minus;231) 。



 **示例1:** 





```
输入:

 "42"
输出:

 42

```

 **示例2:** 





```
输入:

 "   -42"
输出:

 -42
解释: 

第一个非空白字符为 &#39;-&#39;, 它是一个负号。
    我们尽可能将负号与后面所有连续出现的数字组合起来，最后得到 -42 。

```

 **示例3:** 





```
输入:

 "4193 with words"
输出:

 4193
解释:

 转换截止于数字 &#39;3&#39; ，因为它的下一个字符不为数字。

```

 **示例4:** 





```
输入:

 "words and 987"
输出:

 0
解释:

 第一个非空字符是 &#39;w&#39;, 但它不是数字或正、负号。
     因此无法执行有效的转换。
```

 **示例5:** 





```
输入:

 "-91283472332"
输出:

 -2147483648
解释:

 数字 "-91283472332" 超过 32 位有符号整数范围。 
    因此返回 INT_MIN (&minus;231) 。

```


-----

思路：

这道题涉及的情况有4种，因此需要先完全考虑清楚它们的关系，否则会容易漏掉一些规则出错。

1. 空格：空格只有在前面没有任何字符的情况下才能继续处理，如果前面存在任何字符，遇到空格直接跳出。
2. 字母：遇到字母直接跳出。
3. 正负号：只有在还没有出现正负号或者数字的情况，正负号才有效，否则跳出。
4. 数字：遇到数字如果前面无zhengfuhao正负号，说明是正号。


```
/**
 * @param {string} str
 * @return {number}
 */
var myAtoi = function(str) {
  let isNeg=null
  let first=false
  let numS=0
  for(let i=0;i&lt;str.length;i++){
    if(!first &amp;&amp; str[i]===' ')continue
    first=true
    if(isNeg==null &amp;&amp; str[i]==="+"){
      isNeg=false
    }else if(isNeg==null &amp;&amp; str[i]==="-"){
      isNeg=true
    }else if(/\d/.test(str[i])){
      isNeg=!!isNeg
      numS=numS*10+str[i]*1
    }else{
      break
    }
  }
  let res=isNeg?-numS:numS,
      limit=Math.pow(2,31)
  if(res&gt;limit-1)res=limit-1
  if(res&lt;-limit)res=-limit
  return res
};



```
